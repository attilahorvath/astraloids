!function t(e,r,a){function n(i,u){if(!r[i]){if(!e[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return n(r?r:t)},c,c.exports,t,e,r,a)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}var n=t("./astraloids/game"),o=a(n),i=t("./astraloids/game_states/main_state"),u=a(i),l=new o["default"];l.run(new u["default"](l))},{"./astraloids/game":8,"./astraloids/game_states/main_state":10}],2:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=t("gl-matrix").mat4,i=t("gl-matrix").vec4,u=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],r=arguments.length<=1||void 0===arguments[1]?0:arguments[1];a(this,t),this.setPosition(e,r)}return n(t,[{key:"setPosition",value:function(t,e){this.x=t,this.y=e,this.translationVector=i.fromValues(t,e,0,1),this.modelViewMatrix=o.create(),o.translate(this.modelViewMatrix,this.modelViewMatrix,this.translationVector)}}]),t}();r["default"]=u},{"gl-matrix":24}],3:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=t("../entity"),s=a(l),c=t("./background_layer"),h=a(c),f=t("gl-matrix").mat4,d=function(t){function e(t,r){var a=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3],u=arguments.length<=4||void 0===arguments[4]?0:arguments[4];n(this,e);var l=o(this,Object.getPrototypeOf(e).call(this,t,a,i,u));return l.ship=r,l.shipX=l.ship.x,l.shipY=l.ship.y,l.deltaShipX=0,l.deltaShipY=0,l.children.push(new h["default"](t,500,1,0,a,i,u)),l.children.push(new h["default"](t,500,1.5,1,a,i,u)),l.children.push(new h["default"](t,500,2,2,a,i,u)),l}return i(e,t),u(e,[{key:"update",value:function(t,e){arguments.length<=2||void 0===arguments[2]?f.create():arguments[2];this.deltaShipX=this.ship.x-this.shipX,this.deltaShipY=this.ship.y-this.shipY,this.shipX=this.ship.x,this.shipY=this.ship.y;var r=!0,a=!1,n=void 0;try{for(var o,i=this.children[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value;u.x-=this.deltaShipX*u.relativeVelocity,u.y-=this.deltaShipY*u.relativeVelocity,u.x-t.renderer.canvas.width/2>this.ship.x?u.x-=t.renderer.canvas.width:u.x+t.renderer.canvas.width/2<this.ship.x&&(u.x+=t.renderer.canvas.width),u.y-t.renderer.canvas.height/2>this.ship.y?u.y-=t.renderer.canvas.height:u.y+t.renderer.canvas.height/2<this.ship.y&&(u.y+=t.renderer.canvas.height),u.calculateTransformationMatrix()}}catch(l){a=!0,n=l}finally{try{!r&&i["return"]&&i["return"]()}finally{if(a)throw n}}}},{key:"drawAll",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?f.create():arguments[2];r=f.clone(r),f.multiply(r,r,this.transformationMatrix);var a=!0,n=!1,o=void 0;try{for(var i,u=this.children[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var l=i.value,s=l.x,c=l.y;l.drawAll(t,e,r),this.shipX<=l.x?l.x-=t.canvas.width:l.x+=t.canvas.width,l.calculateTransformationMatrix(),l.drawAll(t,e,r),l.x=s,this.shipY<=l.y?l.y-=t.canvas.height:l.y+=t.canvas.height,l.calculateTransformationMatrix(),l.drawAll(t,e,r),l.y=c,this.shipX<=l.x?(l.x-=t.canvas.width,this.shipY<=l.y?l.y-=t.canvas.height:l.y+=t.canvas.height):(l.x+=t.canvas.width,this.shipY<=l.y?l.y-=t.canvas.height:l.y+=t.canvas.height),l.calculateTransformationMatrix(),l.drawAll(t,e,r),l.x=s,l.y=c,l.calculateTransformationMatrix()}}catch(h){n=!0,o=h}finally{try{!a&&u["return"]&&u["return"]()}finally{if(n)throw o}}}}]),e}(s["default"]);r["default"]=d},{"../entity":7,"./background_layer":4,"gl-matrix":24}],4:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=t("../entity"),s=a(l),c=t("gl-matrix").mat4,h=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?500:arguments[1],a=arguments.length<=2||void 0===arguments[2]?1:arguments[2],i=arguments.length<=3||void 0===arguments[3]?1:arguments[3],u=arguments.length<=4||void 0===arguments[4]?0:arguments[4],l=arguments.length<=5||void 0===arguments[5]?0:arguments[5],s=arguments.length<=6||void 0===arguments[6]?0:arguments[6];n(this,e);var c=o(this,Object.getPrototypeOf(e).call(this,t,u,l,s));c.stars=r,c.pointSize=a,c.relativeVelocity=i;for(var h=[],f=0;f<c.stars;f++)h.push(-t.renderer.canvas.width/2+Math.random()*t.renderer.canvas.width,-t.renderer.canvas.height/2+Math.random()*t.renderer.canvas.height,0,1,1,1,1);return c.vertexBuffer=t.renderer.createVertexBuffer(h),c.pointShader=t.renderer.shaders.pointShader,c}return i(e,t),u(e,[{key:"draw",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?c.create():arguments[2];this.pointShader.pointSizeValue=this.pointSize,t.draw(this.pointShader,r,this.vertexBuffer,t.gl.POINTS,this.stars)}}]),e}(s["default"]);r["default"]=h},{"../entity":7,"gl-matrix":24}],5:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=t("../entity"),s=a(l),c=t("gl-matrix").mat4,h=t("gl-matrix").vec2,f=(t("gl-matrix").vec3,t("gl-matrix").vec4,1e3),d=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],a=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];n(this,e);var u=o(this,Object.getPrototypeOf(e).call(this,t,r,a,i));return u.vertexBuffer=t.renderer.createVertexBuffer(u.vertices),u.particleShader=t.renderer.shaders.particleShader,u.currentTime=0,u.lifetime=u.particleShader.lifetimeValue,u.pointSize=u.particleShader.pointSizeValue,u.vertices=new Float32Array(f*(u.particleShader.vertexSize/Float32Array.BYTES_PER_ELEMENT)),u.vertexCount=0,u.vertexIndex=0,u}return i(e,t),u(e,[{key:"emitParticle",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?c.create():arguments[2],a=arguments.length<=3||void 0===arguments[3]?Math.random():arguments[3],n=arguments.length<=4||void 0===arguments[4]?Math.random():arguments[4],o=arguments.length<=5||void 0===arguments[5]?Math.random():arguments[5];r=c.clone(r),c.multiply(r,r,this.transformationMatrix);var i=h.create();h.transformMat4(i,i,r),this.vertexCount++,this.vertexCount>f&&(this.vertexCount=f),this.vertexIndex=(this.vertexIndex+1)%f;var u=this.vertexIndex*(this.particleShader.vertexSize/Float32Array.BYTES_PER_ELEMENT);this.vertices[u++]=i[0],this.vertices[u++]=i[1],this.vertices[u++]=0,this.vertices[u++]=e[0],this.vertices[u++]=e[1],this.vertices[u++]=0,this.vertices[u++]=a,this.vertices[u++]=n,this.vertices[u++]=o,this.vertices[u++]=1,this.vertices[u++]=this.currentTime,t.fillVertexBuffer(this.vertexBuffer,this.vertices)}},{key:"update",value:function(t,e){arguments.length<=2||void 0===arguments[2]?c.create():arguments[2];this.currentTime+=e}},{key:"draw",value:function(t,e){arguments.length<=2||void 0===arguments[2]?c.create():arguments[2];this.vertexCount>0&&(this.particleShader.currentTimeValue=this.currentTime,this.particleShader.lifetimeValue=this.lifetime,this.particleShader.pointSizeValue=this.pointSize,t.draw(this.particleShader,c.create(),this.vertexBuffer,t.gl.POINTS,this.vertexCount))}}]),e}(s["default"]);r["default"]=d},{"../entity":7,"gl-matrix":24}],6:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=t("../entity"),s=a(l),c=t("./particle_emitter"),h=a(c),f=t("gl-matrix").mat2,d=t("gl-matrix").mat4,M=t("gl-matrix").vec2,v=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],a=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=arguments.length<=3||void 0===arguments[3]?0:arguments[3];n(this,e);var u=o(this,Object.getPrototypeOf(e).call(this,t,r,a,i));u.acceleration=M.create(),u.velocity=M.create();var l=[0,-30,0,1,0,0,1,-25,30,0,1,0,0,1,25,30,0,1,0,0,1];return u.vertexBuffer=t.renderer.createVertexBuffer(l),u.simpleShader=t.renderer.shaders.simpleShader,u.thruster=new h["default"](t,0,30,0),u.thruster.pointSize=5,u.thruster.lifetime=500,u.frontLeftSteerer=new h["default"](t,-5,-20,0),u.frontLeftSteerer.pointSize=3,u.frontLeftSteerer.lifetime=100,u.frontRightSteerer=new h["default"](t,5,-20,0),u.frontRightSteerer.pointSize=3,u.frontRightSteerer.lifetime=100,u.backLeftSteerer=new h["default"](t,-20,20,0),u.backLeftSteerer.pointSize=3,u.backLeftSteerer.lifetime=100,u.backRightSteerer=new h["default"](t,20,20,0),u.backRightSteerer.pointSize=3,u.backRightSteerer.lifetime=100,u.children.push(u.thruster),u.children.push(u.frontLeftSteerer),u.children.push(u.frontRightSteerer),u.children.push(u.backLeftSteerer),u.children.push(u.backRightSteerer),u}return i(e,t),u(e,[{key:"update",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?d.create():arguments[2],a=0,n=!1,o=!1,i=!1,u=!1;(t.keyboardInput.keysDown[87]||t.keyboardInput.keysDown[38])&&(a+=.001,n=!0),(t.keyboardInput.keysDown[83]||t.keyboardInput.keysDown[40])&&(a-=2e-4,o=!0),(t.keyboardInput.keysDown[65]||t.keyboardInput.keysDown[37])&&(this.angle-=.002*e,i=!0),(t.keyboardInput.keysDown[68]||t.keyboardInput.keysDown[39])&&(this.angle+=.002*e,u=!0);var l=f.create();f.rotate(l,l,this.angle),M.set(this.acceleration,0,-a),M.transformMat2(this.acceleration,this.acceleration,l),M.set(this.velocity,this.velocity[0]+this.acceleration[0]*e,this.velocity[1]+this.acceleration[1]*e),M.length(this.velocity)>.2&&(M.normalize(this.velocity,this.velocity),M.scale(this.velocity,this.velocity,.2)),this.x+=this.velocity[0]*e,this.y+=this.velocity[1]*e,this.calculateTransformationMatrix(),n&&this.thruster.emitParticle(t.renderer,M.create(),r,.5+.5*Math.random(),0,0),o&&(this.emitSteeringParticles(this.frontLeftSteerer,t.renderer,10,0,-1,r),this.emitSteeringParticles(this.frontRightSteerer,t.renderer,10,0,-1,r)),i&&(this.emitSteeringParticles(this.frontRightSteerer,t.renderer,10,1,0,r),this.emitSteeringParticles(this.backLeftSteerer,t.renderer,10,-1,0,r)),u&&(this.emitSteeringParticles(this.frontLeftSteerer,t.renderer,10,-1,0,r),this.emitSteeringParticles(this.backRightSteerer,t.renderer,10,1,0,r))}},{key:"draw",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?d.create():arguments[2];t.draw(this.simpleShader,r,this.vertexBuffer,t.gl.TRIANGLES,3)}},{key:"emitSteeringParticles",value:function(t,e,r,a,n,o){for(var i=0;r>i;i++){var u=0===a?-.05+.1*Math.random():(.2+.2*Math.random())*a,l=0===n?-.05+.1*Math.random():(.2+.2*Math.random())*n,s=M.fromValues(u,l),c=f.create();f.rotate(c,c,this.angle),M.transformMat2(s,s,c),M.add(s,s,this.velocity),t.emitParticle(e,s,o,.5+.5*Math.random(),.5+.5*Math.random(),.5+.5*Math.random())}}}]),e}(s["default"]);r["default"]=v},{"../entity":7,"./particle_emitter":5,"gl-matrix":24}],7:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=t("gl-matrix").mat4,i=t("gl-matrix").vec4,u=function(){function t(){var e=(arguments.length<=0||void 0===arguments[0]?null:arguments[0],arguments.length<=1||void 0===arguments[1]?0:arguments[1]),r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3];a(this,t),this.x=e,this.y=r,this.angle=n,this.calculateTransformationMatrix(),this.children=[]}return n(t,[{key:"updateAll",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?o.create():arguments[2];r=o.clone(r),o.multiply(r,r,this.transformationMatrix);var a=!0,n=!1,i=void 0;try{for(var u,l=this.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;s.updateAll(t,e,r)}}catch(c){n=!0,i=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw i}}this.update(t,e,r)}},{key:"update",value:function(t,e){arguments.length<=2||void 0===arguments[2]?o.create():arguments[2]}},{key:"drawAll",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?o.create():arguments[2];r=o.clone(r),o.multiply(r,r,this.transformationMatrix);var a=!0,n=!1,i=void 0;try{for(var u,l=this.children[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;s.drawAll(t,e,r)}}catch(c){n=!0,i=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw i}}this.draw(t,e,r)}},{key:"draw",value:function(t,e){arguments.length<=2||void 0===arguments[2]?o.create():arguments[2]}},{key:"calculateTransformationMatrix",value:function(){var t=i.fromValues(this.x,this.y,0,1);this.transformationMatrix=o.create(),o.translate(this.transformationMatrix,this.transformationMatrix,t),o.rotateZ(this.transformationMatrix,this.transformationMatrix,this.angle)}}]),t}();r["default"]=u},{"gl-matrix":24}],8:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),i=t("./keyboard_input"),u=a(i),l=t("./renderer"),s=a(l),c=function(){function t(){n(this,t),this.keyboardInput=new u["default"],this.renderer=new s["default"]}return o(t,[{key:"run",value:function(t){var e=this;this.gameState=t,this.lastTime=Date.now(),requestAnimationFrame(function(){return e.loop()})}},{key:"loop",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?Date.now():arguments[0];requestAnimationFrame(function(){return t.loop()});var r=e-this.lastTime;this.gameState.update(r),this.gameState.draw(r),this.gameState=this.gameState.nextState,this.lastTime=e}}]),t}();r["default"]=c},{"./keyboard_input":11,"./renderer":14}],9:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=function(){function t(e){a(this,t),this.game=e,this.renderer=this.game.renderer,this.entities=[],this.nextState=this}return n(t,[{key:"update",value:function(t){var e=!0,r=!1,a=void 0;try{for(var n,o=this.entities[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i.updateAll(this.game,t)}}catch(u){r=!0,a=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw a}}}},{key:"draw",value:function(t){var e=!0,r=!1,a=void 0;try{for(var n,o=this.entities[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;i.drawAll(this.renderer,t)}}catch(u){r=!0,a=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw a}}}}]),t}();r["default"]=o},{}],10:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=function m(t,e,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,e);if(void 0===a){var n=Object.getPrototypeOf(t);return null===n?void 0:m(n,e,r)}if("value"in a)return a.value;var o=a.get;if(void 0!==o)return o.call(r)},s=t("../game_state"),c=a(s),h=t("../entities/background"),f=a(h),d=t("../entities/ship"),M=a(d),v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t));return r.ship=new M["default"](r.game),r.entities.push(new f["default"](r.game,r.ship)),r.entities.push(r.ship),r}return i(e,t),u(e,[{key:"update",value:function(t){l(Object.getPrototypeOf(e.prototype),"update",this).call(this,t),this.renderer.camera.setPosition(this.renderer.canvas.width/2-this.ship.x,this.renderer.canvas.height/2-this.ship.y)}},{key:"draw",value:function(t){this.renderer.postProcessor.begin(!0),l(Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),this.renderer.postProcessor.end(),this.renderer.clear(),l(Object.getPrototypeOf(e.prototype),"draw",this).call(this,t),this.renderer.postProcessor.process(this.renderer.shaders.thresholdShader),this.renderer.shaders.blurShader.textureSizeValue=[this.renderer.postProcessor.downscaledWidth(),this.renderer.postProcessor.downscaledHeight()],this.renderer.shaders.blurShader.directionValue=[1,0],this.renderer.postProcessor.process(this.renderer.shaders.blurShader),this.renderer.shaders.blurShader.directionValue=[0,1],this.renderer.postProcessor.process(this.renderer.shaders.blurShader),this.renderer.postProcessor.draw(this.renderer.shaders.textureShader,!0)}}]),e}(c["default"]);r["default"]=v},{"../entities/background":3,"../entities/ship":6,"../game_state":9}],11:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function o(){var t=this;a(this,o),this.keysDown={},addEventListener("keydown",function(e){t.keysDown[e.keyCode]=!0}),addEventListener("keyup",function(e){delete t.keysDown[e.keyCode]})};r["default"]=n},{}],12:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),l=t("./vertex_attribute"),s=a(l),c=function(t){function e(t){var r=arguments.length<=1||void 0===arguments[1]?4:arguments[1];n(this,e);var a=o(this,Object.getPrototypeOf(e).call(this,t,r*r));return a.size=r,a.uniformMethod="uniformMatrix"+a.size+"fv",a}return i(e,t),u(e,[{key:"setUniformValue",value:function(t,e,r){t[this.uniformMethod](e,!1,r)}}]),e}(s["default"]);r["default"]=c},{"./vertex_attribute":23}],13:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=t("gl-matrix").mat4,i=4,u=function(){function t(e){var r=this;a(this,t),this.renderer=e,this.textures=[this.prepareTexture(this.renderer.canvas.width,this.renderer.canvas.height),this.prepareTexture(this.renderer.canvas.width,this.renderer.canvas.height)],this.framebuffers=this.textures.map(function(t){return r.prepareFramebuffer(t)}),this.downscaledTextures=[this.prepareTexture(this.renderer.canvas.width/i,this.renderer.canvas.height/i),this.prepareTexture(this.renderer.canvas.width/i,this.renderer.canvas.height/i)],this.downscaledFramebuffers=this.downscaledTextures.map(function(t){return r.prepareFramebuffer(t)}),this.lastFramebuffer=0,this.downscaled=!1;var n=[1,1,0,1,1,-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,-1,-1,0,0,0,1,-1,0,1,0];this.vertexBuffer=this.renderer.createVertexBuffer(n),this.renderer.gl.bindTexture(this.renderer.gl.TEXTURE_2D,null),this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,null)}return n(t,[{key:"prepareTexture",value:function(t,e){var r=this.renderer.gl.createTexture();return this.renderer.gl.bindTexture(this.renderer.gl.TEXTURE_2D,r),this.renderer.gl.texParameteri(this.renderer.gl.TEXTURE_2D,this.renderer.gl.TEXTURE_MIN_FILTER,this.renderer.gl.LINEAR),this.renderer.gl.texParameteri(this.renderer.gl.TEXTURE_2D,this.renderer.gl.TEXTURE_WRAP_S,this.renderer.gl.CLAMP_TO_EDGE),this.renderer.gl.texParameteri(this.renderer.gl.TEXTURE_2D,this.renderer.gl.TEXTURE_WRAP_T,this.renderer.gl.CLAMP_TO_EDGE),this.renderer.gl.texImage2D(this.renderer.gl.TEXTURE_2D,0,this.renderer.gl.RGBA,t,e,0,this.renderer.gl.RGBA,this.renderer.gl.UNSIGNED_BYTE,null),r}},{key:"prepareFramebuffer",value:function(t){var e=this.renderer.gl.createFramebuffer();return this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,e),this.renderer.gl.framebufferTexture2D(this.renderer.gl.FRAMEBUFFER,this.renderer.gl.COLOR_ATTACHMENT0,this.renderer.gl.TEXTURE_2D,t,0),e}},{key:"begin",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];this.downscaled=t,this.downscaled&&this.renderer.setSize(this.renderer.canvas.width/i,this.renderer.canvas.height/i),this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,(this.downscaled?this.downscaledFramebuffers:this.framebuffers)[0]),this.renderer.clear(),this.lastFramebuffer=0}},{key:"end",value:function(){this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,null),this.downscaled&&this.renderer.setSize(this.renderer.canvas.width,this.renderer.canvas.height)}},{key:"process",value:function(t){var e=(this.lastFramebuffer+1)%(this.downscaled?this.downscaledFramebuffers:this.framebuffers).length;this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,(this.downscaled?this.downscaledFramebuffers:this.framebuffers)[e]),this.downscaled&&this.renderer.setSize(this.renderer.canvas.width/i,this.renderer.canvas.height/i),this.renderer.gl.bindTexture(this.renderer.gl.TEXTURE_2D,(this.downscaled?this.downscaledTextures:this.textures)[this.lastFramebuffer]),this.renderer.draw(t,o.create(),this.vertexBuffer,this.renderer.gl.TRIANGLES,6,!0),this.lastFramebuffer=e,this.downscaled&&this.renderer.setSize(this.renderer.canvas.width,this.renderer.canvas.height),this.renderer.gl.bindTexture(this.renderer.gl.TEXTURE_2D,null),this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,null)}},{key:"draw",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];this.renderer.gl.bindTexture(this.renderer.gl.TEXTURE_2D,(this.downscaled?this.downscaledTextures:this.textures)[this.lastFramebuffer]),this.renderer.setSize(this.renderer.canvas.width,this.renderer.canvas.height),e&&this.renderer.gl.blendFunc(this.renderer.gl.SRC_ALPHA,this.renderer.gl.ONE),this.renderer.draw(t,o.create(),this.vertexBuffer,this.renderer.gl.TRIANGLES,6,!0),e&&this.renderer.gl.blendFunc(this.renderer.gl.SRC_ALPHA,this.renderer.gl.ONE_MINUS_SRC_ALPHA),this.renderer.gl.bindTexture(this.renderer.gl.TEXTURE_2D,null)}},{key:"downscaledWidth",value:function(){return this.renderer.canvas.width/i}},{key:"downscaledHeight",value:function(){return this.renderer.canvas.height/i}}]),t}();r["default"]=u},{"gl-matrix":24}],14:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),i=t("./shaders/simple_shader"),u=a(i),l=t("./shaders/point_shader"),s=a(l),c=t("./shaders/particle_shader"),h=a(c),f=t("./shaders/texture_shader"),d=a(f),M=t("./shaders/desaturate_shader"),v=a(M),m=t("./shaders/blur_shader"),x=a(m),p=t("./shaders/threshold_shader"),S=a(p),b=t("./camera"),y=a(b),g=t("./post_processor"),I=a(g),D=t("gl-matrix").mat4,w=(t("gl-matrix").vec4,1024),F=768,_=function(){function t(){n(this,t),this.canvas=document.createElement("canvas"),this.canvas.width=w,this.canvas.height=F,document.body.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.gl.viewport(0,0,this.canvas.clientWidth,this.canvas.clientHeight),this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.projectionMatrix=D.create(),D.ortho(this.projectionMatrix,0,this.canvas.clientWidth,this.canvas.clientHeight,0,-1,1),this.shaders={simpleShader:new u["default"](this),pointShader:new s["default"](this),particleShader:new h["default"](this),textureShader:new d["default"](this),desaturateShader:new v["default"](this),blurShader:new x["default"](this),thresholdShader:new S["default"](this)},this.viewportWidth=w,this.viewportHeight=F,this.lastVertexBuffer=null,this.lastShaderProgram=null,this.enabledVertexAttributeArrays={},this.uniformValues=new Map,this.camera=new y["default"](this.canvas.width/2,this.canvas.height/2),this.postProcessor=new I["default"](this)}return o(t,[{key:"createVertexBuffer",value:function(t){var e=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(t),this.gl.STATIC_DRAW),e}},{key:"fillVertexBuffer",value:function(t,e){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW)}},{key:"setSize",value:function(t,e){t===this.viewportWidth&&e===this.viewportHeight||(this.gl.viewport(0,0,t,e),this.viewportWidth=t,this.viewportHeight=e)}},{key:"clear",value:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}},{key:"useShaderProgram",value:function(t){t!==this.lastShaderProgram&&(this.gl.useProgram(t),this.lastShaderProgram=t)}},{key:"enableVertexAttributeArray",value:function(t){this.enabledVertexAttributeArrays[t]||(this.gl.enableVertexAttribArray(t),this.enabledVertexAttributeArrays[t]=!0)}},{key:"setUniformValue",value:function(t,e,r){this.uniformValues.get(e)!==r&&(t.setUniformValue(this.gl,e,r),this.uniformValues.set(e,r))}},{key:"draw",value:function(t,e,r,a,n){var o=arguments.length<=5||void 0===arguments[5]?!1:arguments[5];r!==this.lastVertexBuffer&&(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),this.lastVertexBuffer=r),t.setVertexAttributes(this);var i=D.clone(this.camera.modelViewMatrix);D.multiply(i,i,e),t.modelViewMatrixValue=o?D.create():i,t.projectionMatrixValue=o?D.create():this.projectionMatrix,t.use(this),this.gl.drawArrays(a,0,n)}}]),t}();r["default"]=_},{"./camera":2,"./post_processor":13,"./shaders/blur_shader":16,"./shaders/desaturate_shader":17,"./shaders/particle_shader":18,"./shaders/point_shader":19,"./shaders/simple_shader":20,"./shaders/texture_shader":21,"./shaders/threshold_shader":22,"gl-matrix":24}],15:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{
value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),i=t("./vertex_attribute"),u=a(i),l=t("./matrix_vertex_attribute"),s=a(l),c=t("gl-matrix").mat4,h=[new u["default"]("vertexPosition")],f=[new s["default"]("modelViewMatrix",4),new s["default"]("projectionMatrix",4)],d=function(){function t(e,r,a){var o=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=arguments.length<=4||void 0===arguments[4]?[]:arguments[4];n(this,t);var u=e.gl;this.vertexAttributes=h.concat(o),this.uniforms=f.concat(i),this.vertexShader=u.createShader(u.VERTEX_SHADER),u.shaderSource(this.vertexShader,r()),u.compileShader(this.vertexShader),u.getShaderParameter(this.vertexShader,u.COMPILE_STATUS)||alert(u.getShaderInfoLog(this.vertexShader)),this.fragmentShader=u.createShader(u.FRAGMENT_SHADER),u.shaderSource(this.fragmentShader,a()),u.compileShader(this.fragmentShader),u.getShaderParameter(this.vertexShader,u.COMPILE_STATUS)||alert(u.getShaderInfoLog(this.vertexShader)),this.shaderProgram=u.createProgram(),u.attachShader(this.shaderProgram,this.vertexShader),u.attachShader(this.shaderProgram,this.fragmentShader),u.linkProgram(this.shaderProgram),u.getProgramParameter(this.shaderProgram,u.LINK_STATUS)||alert(u.getProgramInfoLog(this.shaderProgram)),this.vertexSize=0;var l=!0,s=!1,d=void 0;try{for(var M,v=this.vertexAttributes[Symbol.iterator]();!(l=(M=v.next()).done);l=!0){var m=M.value;this[m.name]=u.getAttribLocation(this.shaderProgram,m.name),this.vertexSize+=m.byteCount}}catch(x){s=!0,d=x}finally{try{!l&&v["return"]&&v["return"]()}finally{if(s)throw d}}var p=!0,S=!1,b=void 0;try{for(var y,g=this.uniforms[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var I=y.value;this[I.name]=u.getUniformLocation(this.shaderProgram,I.name)}}catch(x){S=!0,b=x}finally{try{!p&&g["return"]&&g["return"]()}finally{if(S)throw b}}this.modelViewMatrixValue=c.create(),this.projectionMatrixValue=c.create()}return o(t,[{key:"setVertexAttributes",value:function(t){var e=0,r=!0,a=!1,n=void 0;try{for(var o,i=this.vertexAttributes[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value;t.gl.vertexAttribPointer(this[u.name],u.elementCount,t.gl[u.elementType],!1,this.vertexSize,e),e+=u.byteCount}}catch(l){a=!0,n=l}finally{try{!r&&i["return"]&&i["return"]()}finally{if(a)throw n}}}},{key:"use",value:function(t){t.useShaderProgram(this.shaderProgram);var e=!0,r=!1,a=void 0;try{for(var n,o=this.vertexAttributes[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;t.enableVertexAttributeArray(this[i.name])}}catch(u){r=!0,a=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw a}}var l=!0,s=!1,c=void 0;try{for(var h,f=this.uniforms[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var d=h.value;t.setUniformValue(d,this[d.name],this[d.name+"Value"])}}catch(u){s=!0,c=u}finally{try{!l&&f["return"]&&f["return"]()}finally{if(s)throw c}}}}]),t}();r["default"]=d},{"./matrix_vertex_attribute":12,"./vertex_attribute":23,"gl-matrix":24}],16:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/blur.vert"),f=t("../../../shaders/blur.frag"),d=[new l["default"]("vertexTextureCoordinate",2)],M=[new l["default"]("sampler",1,"UNSIGNED_BYTE"),new l["default"]("textureSize",2),new l["default"]("direction",2),new l["default"]("radius",1)],v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t,h,f,d,M));return r.samplerValue=0,r.textureSizeValue=[t.canvas.width,t.canvas.height],r.directionValue=[1,0],r.radiusValue=1,r}return i(e,t),e}(c["default"]);r["default"]=v},{"../../../shaders/blur.frag":34,"../../../shaders/blur.vert":35,"../shader":15,"../vertex_attribute":23}],17:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/desaturate.vert"),f=t("../../../shaders/desaturate.frag"),d=[new l["default"]("vertexTextureCoordinate",2)],M=[new l["default"]("sampler",1,"UNSIGNED_BYTE"),new l["default"]("intensity",1)],v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t,h,f,d,M));return r.samplerValue=0,r.intensityValue=.5,r}return i(e,t),e}(c["default"]);r["default"]=v},{"../../../shaders/desaturate.frag":36,"../../../shaders/desaturate.vert":37,"../shader":15,"../vertex_attribute":23}],18:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/particle.vert"),f=t("../../../shaders/particle.frag"),d=[new l["default"]("vertexVelocity"),new l["default"]("vertexColor",4),new l["default"]("timestamp",1)],M=[new l["default"]("currentTime",1),new l["default"]("lifetime",1),new l["default"]("pointSize",1)],v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t,h,f,d,M));return r.currentTimeValue=0,r.lifetimeValue=100,r.pointSizeValue=1.5,r}return i(e,t),e}(c["default"]);r["default"]=v},{"../../../shaders/particle.frag":38,"../../../shaders/particle.vert":39,"../shader":15,"../vertex_attribute":23}],19:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/point.vert"),f=t("../../../shaders/point.frag"),d=[new l["default"]("vertexColor",4)],M=[new l["default"]("pointSize",1)],v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t,h,f,d,M));return r.pointSizeValue=1,r}return i(e,t),e}(c["default"]);r["default"]=v},{"../../../shaders/point.frag":40,"../../../shaders/point.vert":41,"../shader":15,"../vertex_attribute":23}],20:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/simple.vert"),f=t("../../../shaders/simple.frag"),d=[new l["default"]("vertexColor",4)],M=function(t){function e(t){return n(this,e),o(this,Object.getPrototypeOf(e).call(this,t,h,f,d))}return i(e,t),e}(c["default"]);r["default"]=M},{"../../../shaders/simple.frag":42,"../../../shaders/simple.vert":43,"../shader":15,"../vertex_attribute":23}],21:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/texture.vert"),f=t("../../../shaders/texture.frag"),d=[new l["default"]("vertexTextureCoordinate",2)],M=[new l["default"]("sampler",1,"UNSIGNED_BYTE")],v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t,h,f,d,M));return r.samplerValue=0,r}return i(e,t),e}(c["default"]);r["default"]=v},{"../../../shaders/texture.frag":44,"../../../shaders/texture.vert":45,"../shader":15,"../vertex_attribute":23}],22:[function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(r,"__esModule",{value:!0});var u=t("../vertex_attribute"),l=a(u),s=t("../shader"),c=a(s),h=t("../../../shaders/threshold.vert"),f=t("../../../shaders/threshold.frag"),d=[new l["default"]("vertexTextureCoordinate",2)],M=[new l["default"]("sampler",1,"UNSIGNED_BYTE"),new l["default"]("threshold",1)],v=function(t){function e(t){n(this,e);var r=o(this,Object.getPrototypeOf(e).call(this,t,h,f,d,M));return r.samplerValue=0,r.thresholdValue=.5,r}return i(e,t),e}(c["default"]);r["default"]=v},{"../../../shaders/threshold.frag":46,"../../../shaders/threshold.vert":47,"../shader":15,"../vertex_attribute":23}],23:[function(t,e,r){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}(),o=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?3:arguments[1],n=arguments.length<=2||void 0===arguments[2]?"FLOAT":arguments[2];switch(a(this,t),this.name=e,this.elementCount=r,this.elementType=n,this.uniformMethod="uniform"+this.elementCount+("FLOAT"===this.elementType?"f":"i")+(this.elementCount>1?"v":""),this.elementType){case"BYTE":this.byteCount=this.elementCount*Int8Array.BYTES_PER_ELEMENT;break;case"UNSIGNED_BYTE":this.byteCount=this.elementCount*Uint8Array.BYTES_PER_ELEMENT;break;case"SHORT":this.byteCount=this.elementCount*Int16Array.BYTES_PER_ELEMENT;break;case"UNSIGNED_SHORT":this.byteCount=this.elementCount*Uint16Array.BYTES_PER_ELEMENT;break;case"FIXED":this.byteCount=this.elementCount*Int32Array.BYTES_PER_ELEMENT;break;case"FLOAT":this.byteCount=this.elementCount*Float32Array.BYTES_PER_ELEMENT}}return n(t,[{key:"setUniformValue",value:function(t,e,r){t[this.uniformMethod](e,r)}}]),t}();r["default"]=o},{}],24:[function(t,e,r){r.glMatrix=t("./gl-matrix/common.js"),r.mat2=t("./gl-matrix/mat2.js"),r.mat2d=t("./gl-matrix/mat2d.js"),r.mat3=t("./gl-matrix/mat3.js"),r.mat4=t("./gl-matrix/mat4.js"),r.quat=t("./gl-matrix/quat.js"),r.vec2=t("./gl-matrix/vec2.js"),r.vec3=t("./gl-matrix/vec3.js"),r.vec4=t("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":25,"./gl-matrix/mat2.js":26,"./gl-matrix/mat2d.js":27,"./gl-matrix/mat3.js":28,"./gl-matrix/mat4.js":29,"./gl-matrix/quat.js":30,"./gl-matrix/vec2.js":31,"./gl-matrix/vec3.js":32,"./gl-matrix/vec4.js":33}],25:[function(t,e,r){var a={};a.EPSILON=1e-6,a.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,a.RANDOM=Math.random,a.ENABLE_SIMD=!1,a.SIMD_AVAILABLE=a.ARRAY_TYPE===Float32Array&&"SIMD"in this,a.USE_SIMD=a.ENABLE_SIMD&&a.SIMD_AVAILABLE,a.setMatrixArrayType=function(t){a.ARRAY_TYPE=t};var n=Math.PI/180;a.toRadian=function(t){return t*n},a.equals=function(t,e){return Math.abs(t-e)<=a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},e.exports=a},{}],26:[function(t,e,r){var a=t("./common.js"),n={};n.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,e,r,n){var o=new a.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},n.set=function(t,e,r,a,n){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t},n.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},n.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r*o-n*a;return i?(i=1/i,t[0]=o*i,t[1]=-a*i,t[2]=-n*i,t[3]=r*i,t):null},n.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=a*u+o*l,t[1]=n*u+i*l,t[2]=a*s+o*c,t[3]=n*s+i*c,t},n.mul=n.multiply,n.rotate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l+o*u,t[1]=n*l+i*u,t[2]=a*-u+o*l,t[3]=n*-u+i*l,t},n.scale=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=r[0],l=r[1];return t[0]=a*u,t[1]=n*u,t[2]=o*l,t[3]=i*l,t},n.fromRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,e,r,a){return t[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-t[2]*r[1],[t,e,r]},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},n.sub=n.subtract,n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(r-u)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-s)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t},e.exports=n},{"./common.js":25}],27:[function(t,e,r){var a=t("./common.js"),n={};n.create=function(){var t=new a.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,e,r,n,o,i){var u=new a.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=o,u[5]=i,u},n.set=function(t,e,r,a,n,o,i){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=i,t},n.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=r*o-a*n;return l?(l=1/l,t[0]=o*l,t[1]=-a*l,t[2]=-n*l,t[3]=r*l,t[4]=(n*u-o*i)*l,t[5]=(a*i-r*u)*l,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1],h=r[2],f=r[3],d=r[4],M=r[5];return t[0]=a*s+o*c,t[1]=n*s+i*c,t[2]=a*h+o*f,t[3]=n*h+i*f,t[4]=a*d+o*M+u,t[5]=n*d+i*M+l,t},n.mul=n.multiply,n.rotate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=Math.sin(r),c=Math.cos(r);return t[0]=a*c+o*s,t[1]=n*c+i*s,t[2]=a*-s+o*c,t[3]=n*-s+i*c,t[4]=u,t[5]=l,t},n.scale=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1];return t[0]=a*s,t[1]=n*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},n.translate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=r[0],c=r[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=i,t[4]=a*s+o*c+u,t[5]=n*s+i*c+l,t},n.fromRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=-r,t[3]=a,t[4]=0,t[5]=0,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=e[0],c=e[1],h=e[2],f=e[3],d=e[4],M=e[5];return Math.abs(r-s)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-h)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-f)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-d)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(l-M)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))},e.exports=n},{"./common.js":25}],28:[function(t,e,r){var a=t("./common.js"),n={};n.create=function(){var t=new a.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},n.clone=function(t){var e=new a.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromValues=function(t,e,r,n,o,i,u,l,s){var c=new a.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=o,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},n.set=function(t,e,r,a,n,o,i,u,l,s){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,e){if(t===e){var r=e[1],a=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=a,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},n.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=c*i-u*s,f=-c*o+u*l,d=s*o-i*l,M=r*h+a*f+n*d;return M?(M=1/M,t[0]=h*M,t[1]=(-c*a+n*s)*M,t[2]=(u*a-n*i)*M,t[3]=f*M,t[4]=(c*r-n*l)*M,t[5]=(-u*r+n*o)*M,t[6]=d*M,t[7]=(-s*r+a*l)*M,t[8]=(i*r-a*o)*M,t):null},n.adjoint=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8];return t[0]=i*c-u*s,t[1]=n*s-a*c,t[2]=a*u-n*i,t[3]=u*l-o*c,t[4]=r*c-n*l,t[5]=n*o-r*u,t[6]=o*s-i*l,t[7]=a*l-r*s,t[8]=r*i-a*o,t},n.determinant=function(t){var e=t[0],r=t[1],a=t[2],n=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return e*(s*o-i*l)+r*(-s*n+i*u)+a*(l*n-o*u)},n.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=r[0],d=r[1],M=r[2],v=r[3],m=r[4],x=r[5],p=r[6],S=r[7],b=r[8];return t[0]=f*a+d*i+M*s,t[1]=f*n+d*u+M*c,t[2]=f*o+d*l+M*h,t[3]=v*a+m*i+x*s,t[4]=v*n+m*u+x*c,t[5]=v*o+m*l+x*h,t[6]=p*a+S*i+b*s,t[7]=p*n+S*u+b*c,t[8]=p*o+S*l+b*h,t},n.mul=n.multiply,n.translate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=r[0],d=r[1];return t[0]=a,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=f*a+d*i+s,t[7]=f*n+d*u+c,t[8]=f*o+d*l+h,t},n.rotate=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=Math.sin(r),d=Math.cos(r);return t[0]=d*a+f*i,t[1]=d*n+f*u,t[2]=d*o+f*l,t[3]=d*i-f*a,t[4]=d*u-f*n,t[5]=d*l-f*o,t[6]=s,t[7]=c,t[8]=h,t},n.scale=function(t,e,r){var a=r[0],n=r[1];return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},n.fromRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=0,t[3]=-r,t[4]=a,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},n.fromQuat=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r+r,u=a+a,l=n+n,s=r*i,c=a*i,h=a*u,f=n*i,d=n*u,M=n*l,v=o*i,m=o*u,x=o*l;return t[0]=1-h-M,t[3]=c-x,t[6]=f+m,t[1]=c+x,t[4]=1-s-M,t[7]=d-v,t[2]=f-m,t[5]=d+v,t[8]=1-s-h,t},n.normalFromMat4=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=e[9],f=e[10],d=e[11],M=e[12],v=e[13],m=e[14],x=e[15],p=r*u-a*i,S=r*l-n*i,b=r*s-o*i,y=a*l-n*u,g=a*s-o*u,I=n*s-o*l,D=c*v-h*M,w=c*m-f*M,F=c*x-d*M,_=h*m-f*v,E=h*x-d*v,P=f*x-d*m,O=p*P-S*E+b*_+y*F-g*w+I*D;return O?(O=1/O,t[0]=(u*P-l*E+s*_)*O,t[1]=(l*F-i*P-s*w)*O,t[2]=(i*E-u*F+s*D)*O,t[3]=(n*E-a*P-o*_)*O,t[4]=(r*P-n*F+o*w)*O,t[5]=(a*F-r*E-o*D)*O,t[6]=(v*I-m*g+x*y)*O,t[7]=(m*b-M*I-x*S)*O,t[8]=(M*g-v*b+x*p)*O,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t[6]=e[6]+r[6]*a,t[7]=e[7]+r[7]*a,t[8]=e[8]+r[8]*a,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],h=t[8],f=e[0],d=e[1],M=e[2],v=e[3],m=e[4],x=e[5],p=t[6],S=e[7],b=e[8];return Math.abs(r-f)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-M)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-v)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-x)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(s-p)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-S)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-b)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))},e.exports=n},{"./common.js":25}],29:[function(t,e,r){var a=t("./common.js"),n={scalar:{},SIMD:{}};n.create=function(){var t=new a.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var e=new a.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.fromValues=function(t,e,r,n,o,i,u,l,s,c,h,f,d,M,v,m){var x=new a.ARRAY_TYPE(16);return x[0]=t,x[1]=e,x[2]=r,x[3]=n,x[4]=o,x[5]=i,x[6]=u,x[7]=l,x[8]=s,x[9]=c,x[10]=h,x[11]=f,x[12]=d,x[13]=M,x[14]=v,x[15]=m,x},n.set=function(t,e,r,a,n,o,i,u,l,s,c,h,f,d,M,v,m){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=h,t[11]=f,t[12]=d,t[13]=M,t[14]=v,t[15]=m,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,e){if(t===e){var r=e[1],a=e[2],n=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=a,t[9]=o,t[11]=e[14],t[12]=n,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},n.SIMD.transpose=function(t,e){var r,a,n,o,i,u,l,s,c,h;return r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(r,a,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),s=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,l),SIMD.Float32x4.store(t,4,s),i=SIMD.Float32x4.shuffle(r,a,2,3,6,7),u=SIMD.Float32x4.shuffle(n,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),h=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,h),t},n.transpose=a.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=e[9],f=e[10],d=e[11],M=e[12],v=e[13],m=e[14],x=e[15],p=r*u-a*i,S=r*l-n*i,b=r*s-o*i,y=a*l-n*u,g=a*s-o*u,I=n*s-o*l,D=c*v-h*M,w=c*m-f*M,F=c*x-d*M,_=h*m-f*v,E=h*x-d*v,P=f*x-d*m,O=p*P-S*E+b*_+y*F-g*w+I*D;return O?(O=1/O,t[0]=(u*P-l*E+s*_)*O,t[1]=(n*E-a*P-o*_)*O,t[2]=(v*I-m*g+x*y)*O,t[3]=(f*g-h*I-d*y)*O,t[4]=(l*F-i*P-s*w)*O,t[5]=(r*P-n*F+o*w)*O,t[6]=(m*b-M*I-x*S)*O,t[7]=(c*I-f*b+d*S)*O,t[8]=(i*E-u*F+s*D)*O,t[9]=(a*F-r*E-o*D)*O,t[10]=(M*g-v*b+x*p)*O,t[11]=(h*b-c*g-d*p)*O,t[12]=(u*w-i*_-l*D)*O,t[13]=(r*_-a*w+n*D)*O,t[14]=(v*S-M*y-m*p)*O,t[15]=(c*y-h*S+f*p)*O,t):null},n.SIMD.invert=function(t,e){var r,a,n,o,i,u,l,s,c,h,f=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),M=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(f,d,0,1,4,5),a=SIMD.Float32x4.shuffle(M,v,0,1,4,5),r=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.shuffle(f,d,2,3,6,7),o=SIMD.Float32x4.shuffle(M,v,2,3,6,7),n=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(a,i),l=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),u),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(a,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(a,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,i)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),l),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),c),h=SIMD.Float32x4.mul(r,u),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),i=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(i,i))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,c)),t):null},n.invert=a.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,e){
var r=e[0],a=e[1],n=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],h=e[9],f=e[10],d=e[11],M=e[12],v=e[13],m=e[14],x=e[15];return t[0]=u*(f*x-d*m)-h*(l*x-s*m)+v*(l*d-s*f),t[1]=-(a*(f*x-d*m)-h*(n*x-o*m)+v*(n*d-o*f)),t[2]=a*(l*x-s*m)-u*(n*x-o*m)+v*(n*s-o*l),t[3]=-(a*(l*d-s*f)-u*(n*d-o*f)+h*(n*s-o*l)),t[4]=-(i*(f*x-d*m)-c*(l*x-s*m)+M*(l*d-s*f)),t[5]=r*(f*x-d*m)-c*(n*x-o*m)+M*(n*d-o*f),t[6]=-(r*(l*x-s*m)-i*(n*x-o*m)+M*(n*s-o*l)),t[7]=r*(l*d-s*f)-i*(n*d-o*f)+c*(n*s-o*l),t[8]=i*(h*x-d*v)-c*(u*x-s*v)+M*(u*d-s*h),t[9]=-(r*(h*x-d*v)-c*(a*x-o*v)+M*(a*d-o*h)),t[10]=r*(u*x-s*v)-i*(a*x-o*v)+M*(a*s-o*u),t[11]=-(r*(u*d-s*h)-i*(a*d-o*h)+c*(a*s-o*u)),t[12]=-(i*(h*m-f*v)-c*(u*m-l*v)+M*(u*f-l*h)),t[13]=r*(h*m-f*v)-c*(a*m-n*v)+M*(a*f-n*h),t[14]=-(r*(u*m-l*v)-i*(a*m-n*v)+M*(a*l-n*u)),t[15]=r*(u*f-l*h)-i*(a*f-n*h)+c*(a*l-n*u),t},n.SIMD.adjoint=function(t,e){var r,a,n,o,i,u,l,s,c,h,f,d,M,r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),n=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return c=SIMD.Float32x4.shuffle(r,a,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(r,a,2,3,6,7),s=SIMD.Float32x4.shuffle(n,o,2,3,6,7),l=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.mul(u,c),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(u,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),d),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),M),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),d),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(l,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,M),t},n.adjoint=a.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var e=t[0],r=t[1],a=t[2],n=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],h=t[10],f=t[11],d=t[12],M=t[13],v=t[14],m=t[15],x=e*i-r*o,p=e*u-a*o,S=e*l-n*o,b=r*u-a*i,y=r*l-n*i,g=a*l-n*u,I=s*M-c*d,D=s*v-h*d,w=s*m-f*d,F=c*v-h*M,_=c*m-f*M,E=h*m-f*v;return x*E-p*_+S*F+b*w-y*D+g*I},n.SIMD.multiply=function(t,e,r){var a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(r,0),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,l);var s=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var h=SIMD.Float32x4.load(r,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));SIMD.Float32x4.store(t,8,f);var d=SIMD.Float32x4.load(r,12),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,M),t},n.scalar.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=e[9],d=e[10],M=e[11],v=e[12],m=e[13],x=e[14],p=e[15],S=r[0],b=r[1],y=r[2],g=r[3];return t[0]=S*a+b*u+y*h+g*v,t[1]=S*n+b*l+y*f+g*m,t[2]=S*o+b*s+y*d+g*x,t[3]=S*i+b*c+y*M+g*p,S=r[4],b=r[5],y=r[6],g=r[7],t[4]=S*a+b*u+y*h+g*v,t[5]=S*n+b*l+y*f+g*m,t[6]=S*o+b*s+y*d+g*x,t[7]=S*i+b*c+y*M+g*p,S=r[8],b=r[9],y=r[10],g=r[11],t[8]=S*a+b*u+y*h+g*v,t[9]=S*n+b*l+y*f+g*m,t[10]=S*o+b*s+y*d+g*x,t[11]=S*i+b*c+y*M+g*p,S=r[12],b=r[13],y=r[14],g=r[15],t[12]=S*a+b*u+y*h+g*v,t[13]=S*n+b*l+y*f+g*m,t[14]=S*o+b*s+y*d+g*x,t[15]=S*i+b*c+y*M+g*p,t},n.multiply=a.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,e,r){var a,n,o,i,u,l,s,c,h,f,d,M,v=r[0],m=r[1],x=r[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*x+e[12],t[13]=e[1]*v+e[5]*m+e[9]*x+e[13],t[14]=e[2]*v+e[6]*m+e[10]*x+e[14],t[15]=e[3]*v+e[7]*m+e[11]*x+e[15]):(a=e[0],n=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],h=e[8],f=e[9],d=e[10],M=e[11],t[0]=a,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=s,t[7]=c,t[8]=h,t[9]=f,t[10]=d,t[11]=M,t[12]=a*v+u*m+h*x+e[12],t[13]=n*v+l*m+f*x+e[13],t[14]=o*v+s*m+d*x+e[14],t[15]=i*v+c*m+M*x+e[15]),t},n.SIMD.translate=function(t,e,r){var a=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var l=SIMD.Float32x4.add(a,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,l),t},n.translate=a.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,e,r){var a=r[0],n=r[1],o=r[2];return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.SIMD.scale=function(t,e,r){var a,n,o,i=SIMD.Float32x4(r[0],r[1],r[2],0);return a=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,0,0,0,0))),n=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.scale=a.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,e,r,n){var o,i,u,l,s,c,h,f,d,M,v,m,x,p,S,b,y,g,I,D,w,F,_,E,P=n[0],O=n[1],T=n[2],A=Math.sqrt(P*P+O*O+T*T);return Math.abs(A)<a.EPSILON?null:(A=1/A,P*=A,O*=A,T*=A,o=Math.sin(r),i=Math.cos(r),u=1-i,l=e[0],s=e[1],c=e[2],h=e[3],f=e[4],d=e[5],M=e[6],v=e[7],m=e[8],x=e[9],p=e[10],S=e[11],b=P*P*u+i,y=O*P*u+T*o,g=T*P*u-O*o,I=P*O*u-T*o,D=O*O*u+i,w=T*O*u+P*o,F=P*T*u+O*o,_=O*T*u-P*o,E=T*T*u+i,t[0]=l*b+f*y+m*g,t[1]=s*b+d*y+x*g,t[2]=c*b+M*y+p*g,t[3]=h*b+v*y+S*g,t[4]=l*I+f*D+m*w,t[5]=s*I+d*D+x*w,t[6]=c*I+M*D+p*w,t[7]=h*I+v*D+S*w,t[8]=l*F+f*_+m*E,t[9]=s*F+d*_+x*E,t[10]=c*F+M*_+p*E,t[11]=h*F+v*_+S*E,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},n.scalar.rotateX=function(t,e,r){var a=Math.sin(r),n=Math.cos(r),o=e[4],i=e[5],u=e[6],l=e[7],s=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*n+s*a,t[5]=i*n+c*a,t[6]=u*n+h*a,t[7]=l*n+f*a,t[8]=s*n-o*a,t[9]=c*n-i*a,t[10]=h*n-u*a,t[11]=f*n-l*a,t},n.SIMD.rotateX=function(t,e,r){var a=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,a))),t},n.rotateX=a.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,e,r){var a=Math.sin(r),n=Math.cos(r),o=e[0],i=e[1],u=e[2],l=e[3],s=e[8],c=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n-s*a,t[1]=i*n-c*a,t[2]=u*n-h*a,t[3]=l*n-f*a,t[8]=o*a+s*n,t[9]=i*a+c*n,t[10]=u*a+h*n,t[11]=l*a+f*n,t},n.SIMD.rotateY=function(t,e,r){var a=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,n))),t},n.rotateY=a.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,e,r){var a=Math.sin(r),n=Math.cos(r),o=e[0],i=e[1],u=e[2],l=e[3],s=e[4],c=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*n+s*a,t[1]=i*n+c*a,t[2]=u*n+h*a,t[3]=l*n+f*a,t[4]=s*n-o*a,t[5]=c*n-i*a,t[6]=h*n-u*a,t[7]=f*n-l*a,t},n.SIMD.rotateZ=function(t,e,r){var a=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,a))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,a))),t},n.rotateZ=a.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,e,r){var n,o,i,u=r[0],l=r[1],s=r[2],c=Math.sqrt(u*u+l*l+s*s);return Math.abs(c)<a.EPSILON?null:(c=1/c,u*=c,l*=c,s*=c,n=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=l*u*i+s*n,t[2]=s*u*i-l*n,t[3]=0,t[4]=u*l*i-s*n,t[5]=l*l*i+o,t[6]=s*l*i+u*n,t[7]=0,t[8]=u*s*i+l*n,t[9]=l*s*i-u*n,t[10]=s*s*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,e){var r=Math.sin(e),a=Math.cos(e);return t[0]=a,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=a+a,l=n+n,s=o+o,c=a*u,h=a*l,f=a*s,d=n*l,M=n*s,v=o*s,m=i*u,x=i*l,p=i*s;return t[0]=1-(d+v),t[1]=h+p,t[2]=f-x,t[3]=0,t[4]=h-p,t[5]=1-(c+v),t[6]=M+m,t[7]=0,t[8]=f+x,t[9]=M-m,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},n.getRotation=function(t,e){var r=e[0]+e[5]+e[10],a=0;return r>0?(a=2*Math.sqrt(r+1),t[3]=.25*a,t[0]=(e[6]-e[9])/a,t[1]=(e[8]-e[2])/a,t[2]=(e[1]-e[4])/a):e[0]>e[5]&e[0]>e[10]?(a=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/a,t[0]=.25*a,t[1]=(e[1]+e[4])/a,t[2]=(e[8]+e[2])/a):e[5]>e[10]?(a=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/a,t[0]=(e[1]+e[4])/a,t[1]=.25*a,t[2]=(e[6]+e[9])/a):(a=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/a,t[0]=(e[8]+e[2])/a,t[1]=(e[6]+e[9])/a,t[2]=.25*a),t},n.fromRotationTranslationScale=function(t,e,r,a){var n=e[0],o=e[1],i=e[2],u=e[3],l=n+n,s=o+o,c=i+i,h=n*l,f=n*s,d=n*c,M=o*s,v=o*c,m=i*c,x=u*l,p=u*s,S=u*c,b=a[0],y=a[1],g=a[2];return t[0]=(1-(M+m))*b,t[1]=(f+S)*b,t[2]=(d-p)*b,t[3]=0,t[4]=(f-S)*y,t[5]=(1-(h+m))*y,t[6]=(v+x)*y,t[7]=0,t[8]=(d+p)*g,t[9]=(v-x)*g,t[10]=(1-(h+M))*g,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,e,r,a,n){var o=e[0],i=e[1],u=e[2],l=e[3],s=o+o,c=i+i,h=u+u,f=o*s,d=o*c,M=o*h,v=i*c,m=i*h,x=u*h,p=l*s,S=l*c,b=l*h,y=a[0],g=a[1],I=a[2],D=n[0],w=n[1],F=n[2];return t[0]=(1-(v+x))*y,t[1]=(d+b)*y,t[2]=(M-S)*y,t[3]=0,t[4]=(d-b)*g,t[5]=(1-(f+x))*g,t[6]=(m+p)*g,t[7]=0,t[8]=(M+S)*I,t[9]=(m-p)*I,t[10]=(1-(f+v))*I,t[11]=0,t[12]=r[0]+D-(t[0]*D+t[4]*w+t[8]*F),t[13]=r[1]+w-(t[1]*D+t[5]*w+t[9]*F),t[14]=r[2]+F-(t[2]*D+t[6]*w+t[10]*F),t[15]=1,t},n.fromQuat=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r+r,u=a+a,l=n+n,s=r*i,c=a*i,h=a*u,f=n*i,d=n*u,M=n*l,v=o*i,m=o*u,x=o*l;return t[0]=1-h-M,t[1]=c+x,t[2]=f-m,t[3]=0,t[4]=c-x,t[5]=1-s-M,t[6]=d+v,t[7]=0,t[8]=f+m,t[9]=d-v,t[10]=1-s-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,e,r,a,n,o,i){var u=1/(r-e),l=1/(n-a),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(r+e)*u,t[9]=(n+a)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,e,r,a,n){var o=1/Math.tan(e/2),i=1/(a-n);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+a)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*a*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,e,r,a){var n=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(n+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-((i-u)*l*.5),t[9]=(n-o)*s*.5,t[10]=a/(r-a),t[11]=-1,t[12]=0,t[13]=0,t[14]=a*r/(r-a),t[15]=0,t},n.ortho=function(t,e,r,a,n,o,i){var u=1/(e-r),l=1/(a-n),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+r)*u,t[13]=(n+a)*l,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,e,r,o){var i,u,l,s,c,h,f,d,M,v,m=e[0],x=e[1],p=e[2],S=o[0],b=o[1],y=o[2],g=r[0],I=r[1],D=r[2];return Math.abs(m-g)<a.EPSILON&&Math.abs(x-I)<a.EPSILON&&Math.abs(p-D)<a.EPSILON?n.identity(t):(f=m-g,d=x-I,M=p-D,v=1/Math.sqrt(f*f+d*d+M*M),f*=v,d*=v,M*=v,i=b*M-y*d,u=y*f-S*M,l=S*d-b*f,v=Math.sqrt(i*i+u*u+l*l),v?(v=1/v,i*=v,u*=v,l*=v):(i=0,u=0,l=0),s=d*l-M*u,c=M*i-f*l,h=f*u-d*i,v=Math.sqrt(s*s+c*c+h*h),v?(v=1/v,s*=v,c*=v,h*=v):(s=0,c=0,h=0),t[0]=i,t[1]=s,t[2]=f,t[3]=0,t[4]=u,t[5]=c,t[6]=d,t[7]=0,t[8]=l,t[9]=h,t[10]=M,t[11]=0,t[12]=-(i*m+u*x+l*p),t[13]=-(s*m+c*x+h*p),t[14]=-(f*m+d*x+M*p),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},n.multiplyScalarAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t[4]=e[4]+r[4]*a,t[5]=e[5]+r[5]*a,t[6]=e[6]+r[6]*a,t[7]=e[7]+r[7]*a,t[8]=e[8]+r[8]*a,t[9]=e[9]+r[9]*a,t[10]=e[10]+r[10]*a,t[11]=e[11]+r[11]*a,t[12]=e[12]+r[12]*a,t[13]=e[13]+r[13]*a,t[14]=e[14]+r[14]*a,t[15]=e[15]+r[15]*a,t},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],h=t[8],f=t[9],d=t[10],M=t[11],v=t[12],m=t[13],x=t[14],p=t[15],S=e[0],b=e[1],y=e[2],g=e[3],I=e[4],D=e[5],w=e[6],F=e[7],_=e[8],E=e[9],P=e[10],O=e[11],T=e[12],A=e[13],R=e[14],z=e[15];return Math.abs(r-S)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-b)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(o-y)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-g)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(u-I)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(l-D)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(s-w)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-F)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(h-_)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(f-E)<=a.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-P)<=a.EPSILON*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(M-O)<=a.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(v-T)<=a.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(m-A)<=a.EPSILON*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(x-R)<=a.EPSILON*Math.max(1,Math.abs(x),Math.abs(R))&&Math.abs(p-z)<=a.EPSILON*Math.max(1,Math.abs(p),Math.abs(z))},e.exports=n},{"./common.js":25}],30:[function(t,e,r){var a=t("./common.js"),n=t("./mat3.js"),o=t("./vec3.js"),i=t("./vec4.js"),u={};u.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(a,n,i){var l=o.dot(n,i);return-.999999>l?(o.cross(t,e,n),o.length(t)<1e-6&&o.cross(t,r,n),o.normalize(t,t),u.setAxisAngle(a,t,Math.PI),a):l>.999999?(a[0]=0,a[1]=0,a[2]=0,a[3]=1,a):(o.cross(t,n,i),a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=1+l,u.normalize(a,a))}}(),u.setAxes=function(){var t=n.create();return function(e,r,a,n){return t[0]=a[0],t[3]=a[1],t[6]=a[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,r){r=.5*r;var a=Math.sin(r);return t[0]=a*e[0],t[1]=a*e[1],t[2]=a*e[2],t[3]=Math.cos(r),t},u.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),a=Math.sin(r/2);return 0!=a?(t[0]=e[0]/a,t[1]=e[1]/a,t[2]=e[2]/a):(t[0]=1,t[1]=0,t[2]=0),r},u.add=i.add,u.multiply=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3],u=r[0],l=r[1],s=r[2],c=r[3];return t[0]=a*c+i*u+n*s-o*l,t[1]=n*c+i*l+o*u-a*s,t[2]=o*c+i*s+a*l-n*u,t[3]=i*c-a*u-n*l-o*s,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,r){r*=.5;var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l+i*u,t[1]=n*l+o*u,t[2]=o*l-n*u,t[3]=i*l-a*u,t},u.rotateY=function(t,e,r){r*=.5;var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l-o*u,t[1]=n*l+i*u,t[2]=o*l+a*u,t[3]=i*l-n*u,t},u.rotateZ=function(t,e,r){r*=.5;var a=e[0],n=e[1],o=e[2],i=e[3],u=Math.sin(r),l=Math.cos(r);return t[0]=a*l+n*u,t[1]=n*l-a*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},u.calculateW=function(t,e){var r=e[0],a=e[1],n=e[2];return t[0]=r,t[1]=a,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-a*a-n*n)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,r,a){var n,o,i,u,l,s=e[0],c=e[1],h=e[2],f=e[3],d=r[0],M=r[1],v=r[2],m=r[3];return o=s*d+c*M+h*v+f*m,0>o&&(o=-o,d=-d,M=-M,v=-v,m=-m),1-o>1e-6?(n=Math.acos(o),i=Math.sin(n),u=Math.sin((1-a)*n)/i,l=Math.sin(a*n)/i):(u=1-a,l=a),t[0]=u*s+l*d,t[1]=u*c+l*M,t[2]=u*h+l*v,t[3]=u*f+l*m,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(r,a,n,o,i,l){return u.slerp(t,a,i,l),u.slerp(e,n,o,l),u.slerp(r,t,e,2*l*(1-l)),r}}(),u.invert=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r*r+a*a+n*n+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-a*u,t[2]=-n*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var r,a=e[0]+e[4]+e[8];if(a>0)r=Math.sqrt(a+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var o=(n+1)%3,i=(n+2)%3;r=Math.sqrt(e[3*n+n]-e[3*o+o]-e[3*i+i]+1),t[n]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+n]+e[3*n+o])*r,t[i]=(e[3*i+n]+e[3*n+i])*r}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,e.exports=u},{"./common.js":25,"./mat3.js":28,"./vec3.js":32,"./vec4.js":33}],31:[function(t,e,r){var a=t("./common.js"),n={};n.create=function(){var t=new a.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},n.fromValues=function(t,e){var r=new a.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},n.set=function(t,e,r){return t[0]=e,t[1]=r,t},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},n.sub=n.subtract,n.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},n.mul=n.multiply,n.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},n.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},n.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},n.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},n.scaleAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t},n.distance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(r*r+a*a)},n.dist=n.distance,n.squaredDistance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1];return r*r+a*a},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},n.len=n.length,n.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},n.normalize=function(t,e){var r=e[0],a=e[1],n=r*r+a*a;return n>0&&(n=1/Math.sqrt(n),t[0]=e[0]*n,t[1]=e[1]*n),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},n.cross=function(t,e,r){var a=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=a,t},n.lerp=function(t,e,r,a){var n=e[0],o=e[1];return t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t},n.random=function(t,e){e=e||1;var r=2*a.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},n.transformMat2=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[2]*n,t[1]=r[1]*a+r[3]*n,t},n.transformMat2d=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[2]*n+r[4],t[1]=r[1]*a+r[3]*n+r[5],t},n.transformMat3=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[3]*n+r[6],t[1]=r[1]*a+r[4]*n+r[7],t},n.transformMat4=function(t,e,r){var a=e[0],n=e[1];return t[0]=r[0]*a+r[4]*n+r[12],t[1]=r[1]*a+r[5]*n+r[13],t},n.forEach=function(){var t=n.create();return function(e,r,a,n,o,i){var u,l;for(r||(r=2),a||(a=0),l=n?Math.min(n*r+a,e.length):e.length,u=a;l>u;u+=r)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},n.equals=function(t,e){var r=t[0],n=t[1],o=e[0],i=e[1];return Math.abs(r-o)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))},e.exports=n},{"./common.js":25}],32:[function(t,e,r){var a=t("./common.js"),n={};n.create=function(){var t=new a.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.fromValues=function(t,e,r){var n=new a.ARRAY_TYPE(3);return n[0]=t,n[1]=e,n[2]=r,n},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.set=function(t,e,r,a){return t[0]=e,t[1]=r,t[2]=a,t},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},n.sub=n.subtract,n.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},n.mul=n.multiply,n.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},n.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},n.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},n.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},n.scaleAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t},n.distance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+a*a+n*n)},n.dist=n.distance,n.squaredDistance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2];return r*r+a*a+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],r=t[1],a=t[2];return Math.sqrt(e*e+r*r+a*a)},n.len=n.length,n.squaredLength=function(t){var e=t[0],r=t[1],a=t[2];return e*e+r*r+a*a},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},n.normalize=function(t,e){var r=e[0],a=e[1],n=e[2],o=r*r+a*a+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},n.cross=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[0],u=r[1],l=r[2];return t[0]=n*l-o*u,t[1]=o*i-a*l,t[2]=a*u-n*i,t},n.lerp=function(t,e,r,a){var n=e[0],o=e[1],i=e[2];return t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t[2]=i+a*(r[2]-i),t},n.hermite=function(t,e,r,a,n,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+r[0]*l+a[0]*s+n[0]*c,t[1]=e[1]*u+r[1]*l+a[1]*s+n[1]*c,t[2]=e[2]*u+r[2]*l+a[2]*s+n[2]*c,t},n.bezier=function(t,e,r,a,n,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,h=3*l*i,f=l*o;return t[0]=e[0]*s+r[0]*c+a[0]*h+n[0]*f,t[1]=e[1]*s+r[1]*c+a[1]*h+n[1]*f,t[2]=e[2]*s+r[2]*c+a[2]*h+n[2]*f,t},n.random=function(t,e){e=e||1;var r=2*a.RANDOM()*Math.PI,n=2*a.RANDOM()-1,o=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*e,t},n.transformMat4=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[3]*a+r[7]*n+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*a+r[4]*n+r[8]*o+r[12])/i,t[1]=(r[1]*a+r[5]*n+r[9]*o+r[13])/i,t[2]=(r[2]*a+r[6]*n+r[10]*o+r[14])/i,t},n.transformMat3=function(t,e,r){var a=e[0],n=e[1],o=e[2];return t[0]=a*r[0]+n*r[3]+o*r[6],t[1]=a*r[1]+n*r[4]+o*r[7],t[2]=a*r[2]+n*r[5]+o*r[8],t},n.transformQuat=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*a+u*o-l*n,h=s*n+l*a-i*o,f=s*o+i*n-u*a,d=-i*a-u*n-l*o;return t[0]=c*s+d*-i+h*-l-f*-u,t[1]=h*s+d*-u+f*-i-c*-l,t[2]=f*s+d*-l+c*-u-h*-i,t},n.rotateX=function(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0],o[1]=n[1]*Math.cos(a)-n[2]*Math.sin(a),o[2]=n[1]*Math.sin(a)+n[2]*Math.cos(a),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateY=function(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[2]*Math.sin(a)+n[0]*Math.cos(a),o[1]=n[1],o[2]=n[2]*Math.cos(a)-n[0]*Math.sin(a),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateZ=function(t,e,r,a){var n=[],o=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],o[0]=n[0]*Math.cos(a)-n[1]*Math.sin(a),o[1]=n[0]*Math.sin(a)+n[1]*Math.cos(a),o[2]=n[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.forEach=function(){var t=n.create();return function(e,r,a,n,o,i){var u,l;for(r||(r=3),a||(a=0),l=n?Math.min(n*r+a,e.length):e.length,u=a;l>u;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),n.angle=function(t,e){var r=n.fromValues(t[0],t[1],t[2]),a=n.fromValues(e[0],e[1],e[2]);n.normalize(r,r),n.normalize(a,a);var o=n.dot(r,a);return o>1?0:Math.acos(o)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=e[0],u=e[1],l=e[2];return Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))},e.exports=n},{"./common.js":25}],33:[function(t,e,r){var a=t("./common.js"),n={};n.create=function(){var t=new a.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var e=new a.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.fromValues=function(t,e,r,n){var o=new a.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o},n.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.set=function(t,e,r,a,n){return t[0]=e,t[1]=r,t[2]=a,t[3]=n,t},n.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},n.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},n.sub=n.subtract,n.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},n.mul=n.multiply,n.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},n.div=n.divide,n.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},n.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},n.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},n.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),
t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},n.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},n.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},n.scaleAndAdd=function(t,e,r,a){return t[0]=e[0]+r[0]*a,t[1]=e[1]+r[1]*a,t[2]=e[2]+r[2]*a,t[3]=e[3]+r[3]*a,t},n.distance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+a*a+n*n+o*o)},n.dist=n.distance,n.squaredDistance=function(t,e){var r=e[0]-t[0],a=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return r*r+a*a+n*n+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var e=t[0],r=t[1],a=t[2],n=t[3];return Math.sqrt(e*e+r*r+a*a+n*n)},n.len=n.length,n.squaredLength=function(t){var e=t[0],r=t[1],a=t[2],n=t[3];return e*e+r*r+a*a+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},n.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},n.normalize=function(t,e){var r=e[0],a=e[1],n=e[2],o=e[3],i=r*r+a*a+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=a*i,t[2]=n*i,t[3]=o*i),t},n.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},n.lerp=function(t,e,r,a){var n=e[0],o=e[1],i=e[2],u=e[3];return t[0]=n+a*(r[0]-n),t[1]=o+a*(r[1]-o),t[2]=i+a*(r[2]-i),t[3]=u+a*(r[3]-u),t},n.random=function(t,e){return e=e||1,t[0]=a.RANDOM(),t[1]=a.RANDOM(),t[2]=a.RANDOM(),t[3]=a.RANDOM(),n.normalize(t,t),n.scale(t,t,e),t},n.transformMat4=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=e[3];return t[0]=r[0]*a+r[4]*n+r[8]*o+r[12]*i,t[1]=r[1]*a+r[5]*n+r[9]*o+r[13]*i,t[2]=r[2]*a+r[6]*n+r[10]*o+r[14]*i,t[3]=r[3]*a+r[7]*n+r[11]*o+r[15]*i,t},n.transformQuat=function(t,e,r){var a=e[0],n=e[1],o=e[2],i=r[0],u=r[1],l=r[2],s=r[3],c=s*a+u*o-l*n,h=s*n+l*a-i*o,f=s*o+i*n-u*a,d=-i*a-u*n-l*o;return t[0]=c*s+d*-i+h*-l-f*-u,t[1]=h*s+d*-u+f*-i-c*-l,t[2]=f*s+d*-l+c*-u-h*-i,t[3]=e[3],t},n.forEach=function(){var t=n.create();return function(e,r,a,n,o,i){var u,l;for(r||(r=4),a||(a=0),l=n?Math.min(n*r+a,e.length):e.length,u=a;l>u;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},n.equals=function(t,e){var r=t[0],n=t[1],o=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(r-u)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-l)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-s)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-c)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.exports=n},{"./common.js":25}],34:[function(t,e,r){e.exports=function(t){var e="precision mediump float; \n \nconst float pi = 3.14159265; \n \nuniform sampler2D sampler; \nuniform vec2 textureSize; \nuniform vec2 direction; \nuniform float radius; \n \nvarying vec2 textureCoordinate; \n \nvoid main() { \n  vec2 textureStep = (1.0 / textureSize) * direction * radius; \n  vec4 color = vec4(0.0); \n \n  color += texture2D(sampler, textureCoordinate - 4.0 * textureStep) * 0.0162162162; \n  color += texture2D(sampler, textureCoordinate - 3.0 * textureStep) * 0.0540540541; \n  color += texture2D(sampler, textureCoordinate - 2.0 * textureStep) * 0.1216216216; \n  color += texture2D(sampler, textureCoordinate - 1.0 * textureStep) * 0.1945945946; \n  color += texture2D(sampler, textureCoordinate + 0.0 * textureStep) * 0.2270270270; \n  color += texture2D(sampler, textureCoordinate + 1.0 * textureStep) * 0.1945945946; \n  color += texture2D(sampler, textureCoordinate + 2.0 * textureStep) * 0.1216216216; \n  color += texture2D(sampler, textureCoordinate + 3.0 * textureStep) * 0.0540540541; \n  color += texture2D(sampler, textureCoordinate + 4.0 * textureStep) * 0.0162162162; \n \n  gl_FragColor = color; \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],35:[function(t,e,r){e.exports=function(t){var e="uniform mat4 modelViewMatrix; \nuniform mat4 projectionMatrix; \n \nattribute vec3 vertexPosition; \nattribute vec2 vertexTextureCoordinate; \n \nvarying vec2 textureCoordinate; \n \nvoid main() { \n  textureCoordinate = vertexTextureCoordinate; \n \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0); \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],36:[function(t,e,r){e.exports=function(t){var e="precision mediump float; \n \nuniform sampler2D sampler; \nuniform float intensity; \n \nvarying vec2 textureCoordinate; \n \nvoid main() { \n  vec4 color = texture2D(sampler, textureCoordinate); \n  float luminance = dot(color.rgb, vec3(0.3, 0.59, 0.11)); \n  color.rgb = mix(color.rgb, vec3(luminance), intensity); \n \n  gl_FragColor = color; \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],37:[function(t,e,r){arguments[4][35][0].apply(r,arguments)},{dup:35}],38:[function(t,e,r){e.exports=function(t){var e="precision mediump float; \n \nvarying vec4 color; \n \nvoid main() { \n  gl_FragColor = color; \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],39:[function(t,e,r){e.exports=function(t){var e="uniform mat4 modelViewMatrix; \nuniform mat4 projectionMatrix; \n \nuniform float currentTime; \nuniform float lifetime; \nuniform float pointSize; \n \nattribute vec3 vertexPosition; \nattribute vec3 vertexVelocity; \nattribute vec4 vertexColor; \nattribute float timestamp; \n \nvarying vec4 color; \n \nvoid main() { \n  color = vertexColor; \n  color.a = 1.0 - (currentTime - timestamp) / lifetime; \n \n  vec3 currentPosition = vec3(vertexPosition + vertexVelocity * (currentTime - timestamp)); \n \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(currentPosition, 1.0); \n  gl_PointSize = pointSize; \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],40:[function(t,e,r){arguments[4][38][0].apply(r,arguments)},{dup:38}],41:[function(t,e,r){e.exports=function(t){var e="uniform mat4 modelViewMatrix; \nuniform mat4 projectionMatrix; \n \nuniform float pointSize; \n \nattribute vec3 vertexPosition; \nattribute vec4 vertexColor; \n \nvarying vec4 color; \n \nvoid main() { \n  color = vertexColor; \n \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0); \n  gl_PointSize = pointSize; \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],42:[function(t,e,r){arguments[4][38][0].apply(r,arguments)},{dup:38}],43:[function(t,e,r){e.exports=function(t){var e="uniform mat4 modelViewMatrix; \nuniform mat4 projectionMatrix; \n \nattribute vec3 vertexPosition; \nattribute vec4 vertexColor; \n \nvarying vec4 color; \n \nvoid main() { \n  color = vertexColor; \n \n  gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0); \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],44:[function(t,e,r){e.exports=function(t){var e="precision mediump float; \n \nuniform sampler2D sampler; \n \nvarying vec2 textureCoordinate; \n \nvoid main() { \n  gl_FragColor = texture2D(sampler, textureCoordinate); \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],45:[function(t,e,r){arguments[4][35][0].apply(r,arguments)},{dup:35}],46:[function(t,e,r){e.exports=function(t){var e="precision mediump float; \n \nuniform sampler2D sampler; \nuniform float threshold; \n \nvarying vec2 textureCoordinate; \n \nvoid main() { \n  vec4 color = texture2D(sampler, textureCoordinate); \n  float luminance = dot(color.rgb, vec3(0.3, 0.59, 0.11)); \n  luminance = max(0.0, luminance - threshold); \n  color.rgb *= sign(luminance); \n \n  gl_FragColor = color; \n} \n \n";t=t||{};for(var r in t){var a=new RegExp("{{"+r+"}}","g");e=e.replace(a,t[r])}return e}},{}],47:[function(t,e,r){arguments[4][35][0].apply(r,arguments)},{dup:35}]},{},[1]);